// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"jan-server/services/llm-api/internal/domain/conversation"
	"jan-server/services/llm-api/internal/domain/model"
	"jan-server/services/llm-api/internal/domain/user"
	"jan-server/services/llm-api/internal/infrastructure"
	"jan-server/services/llm-api/internal/infrastructure/crontab"
	"jan-server/services/llm-api/internal/infrastructure/database/repository/conversationrepo"
	"jan-server/services/llm-api/internal/infrastructure/database/repository/modelrepo"
	"jan-server/services/llm-api/internal/infrastructure/database/repository/userrepo"
	"jan-server/services/llm-api/internal/infrastructure/inference"
	"jan-server/services/llm-api/internal/infrastructure/logger"
	"jan-server/services/llm-api/internal/interfaces/httpserver"
	"jan-server/services/llm-api/internal/interfaces/httpserver/handlers/authhandler"
	"jan-server/services/llm-api/internal/interfaces/httpserver/handlers/chathandler"
	"jan-server/services/llm-api/internal/interfaces/httpserver/handlers/conversationhandler"
	"jan-server/services/llm-api/internal/interfaces/httpserver/handlers/guesthandler"
	"jan-server/services/llm-api/internal/interfaces/httpserver/handlers/modelhandler"
	"jan-server/services/llm-api/internal/interfaces/httpserver/routes/auth"
	"jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1"
	"jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/admin"
	model3 "jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/admin/model"
	provider2 "jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/admin/provider"
	"jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/chat"
	conversation2 "jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/conversation"
	model2 "jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/model"
	"jan-server/services/llm-api/internal/interfaces/httpserver/routes/v1/model/provider"
)

import (
	_ "net/http/pprof"
)

// Injectors from wire.go:

func CreateApplication() (*Application, error) {
	config, err := infrastructure.ProvideConfig()
	if err != nil {
		return nil, err
	}
	zerologLogger := logger.GetLogger()
	db, err := infrastructure.ProvideDatabase(config, zerologLogger)
	if err != nil {
		return nil, err
	}
	database := infrastructure.ProvideTransactionDatabase(db)
	providerRepository := modelrepo.NewProviderGormRepository(database)
	providerModelRepository := modelrepo.NewProviderModelGormRepository(database)
	modelCatalogRepository := modelrepo.NewModelCatalogGormRepository(database)
	providerModelService := model.NewProviderModelService(providerModelRepository, modelCatalogRepository)
	modelCatalogService := model.NewModelCatalogService(modelCatalogRepository)
	providerService := model.NewProviderService(providerRepository, providerModelService, modelCatalogService)
	modelHandler := modelhandler.NewModelHandler(providerService, providerModelService)
	modelCatalogHandler := modelhandler.NewModelCatalogHandler(modelCatalogService, providerModelService)
	modelProviderRoute := provider.NewModelProviderRoute(modelHandler)
	repository := userrepo.NewUserGormRepository(db)
	service := user.NewService(repository)
	authHandler := authhandler.NewAuthHandler(service, zerologLogger)
	modelRoute := model2.NewModelRoute(modelHandler, modelCatalogHandler, modelProviderRoute, authHandler)
	inferenceProvider := inference.NewInferenceProvider()
	providerHandler := modelhandler.NewProviderHandler(providerService, providerModelService, inferenceProvider)
	conversationRepository := conversationrepo.NewConversationGormRepository(database)
	conversationService := conversation.NewConversationService(conversationRepository)
	conversationHandler := conversationhandler.NewConversationHandler(conversationService)
	resolver := infrastructure.ProvideMediaResolver(config, zerologLogger)
	chatHandler := chathandler.NewChatHandler(inferenceProvider, providerHandler, conversationHandler, conversationService, resolver)
	chatCompletionRoute := chat.NewChatCompletionRoute(chatHandler, authHandler)
	chatRoute := chat.NewChatRoute(chatCompletionRoute)
	conversationRoute := conversation2.NewConversationRoute(conversationHandler, authHandler)
	providerModelHandler := modelhandler.NewProviderModelHandler(providerModelService, providerService, modelCatalogService)
	adminModelRoute := model3.NewAdminModelRoute(modelHandler, modelCatalogHandler, providerModelHandler)
	adminProviderRoute := provider2.NewAdminProviderRoute(providerHandler)
	adminRoute := admin.NewAdminRoute(adminModelRoute, adminProviderRoute)
	v1Route := v1.NewV1Route(modelRoute, chatRoute, conversationRoute, adminRoute)
	client := infrastructure.ProvideKeycloakClient(config, zerologLogger)
	guestHandler := guestauth.NewGuestHandler(client, zerologLogger)
	upgradeHandler := guestauth.NewUpgradeHandler(client, zerologLogger)
	tokenHandler := authhandler.NewTokenHandler(client, zerologLogger)
	authRoute := auth.NewAuthRoute(guestHandler, upgradeHandler, tokenHandler)
	keycloakValidator, err := infrastructure.ProvideKeycloakValidator(config, zerologLogger)
	if err != nil {
		return nil, err
	}
	infrastructureInfrastructure := infrastructure.NewInfrastructure(db, keycloakValidator, zerologLogger)
	httpServer := httpserver.NewHttpServer(v1Route, authRoute, infrastructureInfrastructure, config)
	crontabCrontab := crontab.NewCrontab(providerService, inferenceProvider)
	application := &Application{
		httpServer: httpServer,
		crontab:    crontabCrontab,
	}
	return application, nil
}

func CreateDataInitializer() (*DataInitializer, error) {
	config, err := infrastructure.ProvideConfig()
	if err != nil {
		return nil, err
	}
	zerologLogger := logger.GetLogger()
	db, err := infrastructure.ProvideDatabase(config, zerologLogger)
	if err != nil {
		return nil, err
	}
	database := infrastructure.ProvideTransactionDatabase(db)
	providerRepository := modelrepo.NewProviderGormRepository(database)
	providerModelRepository := modelrepo.NewProviderModelGormRepository(database)
	modelCatalogRepository := modelrepo.NewModelCatalogGormRepository(database)
	providerModelService := model.NewProviderModelService(providerModelRepository, modelCatalogRepository)
	modelCatalogService := model.NewModelCatalogService(modelCatalogRepository)
	providerService := model.NewProviderService(providerRepository, providerModelService, modelCatalogService)
	inferenceProvider := inference.NewInferenceProvider()
	dataInitializer := &DataInitializer{
		provider:            providerService,
		modelCatalogService: modelCatalogService,
		inferenceProvider:   inferenceProvider,
	}
	return dataInitializer, nil
}
