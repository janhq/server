basePath: /
definitions:
  responses.ErrorResponse:
    properties:
      code:
        description: UUID from PlatformError
        type: string
      error:
        type: string
      request_id:
        type: string
    type: object
info:
  contact:
    name: Jan Server Team
    url: https://github.com/janhq/jan-server
  description: Model Context Protocol (MCP) tools service providing search and scraping
    capabilities.
  title: Jan Server MCP Tools Service
  version: "1.0"
paths:
  /v1/mcp:
    post:
      consumes:
      - application/json
      description: |-
        Handles Model Context Protocol (MCP) requests over HTTP. Supports MCP methods: initialize, ping, tools/list, tools/call, prompts/list, prompts/call, resources/list, resources/read.

        **Available Tools:**
        - `google_search`: Web search via pluggable engines (Serper/SearXNG) with params: q, gl, hl, location, num, tbs, page, autocorrect, domain_allow_list, location_hint, offline_mode. Returns structured citations.
        - `scrape`: Web page scraping (params: url, includeMarkdown) returning text, preview, cache_status, and metadata.
        - `file_search_index` / `file_search_query`: Index arbitrary text and run similarity queries against the lightweight vector store.
        - `python_exec`: Execute trusted code through SandboxFusion (params: code, language, session_id, approved) to retrieve stdout/stderr/artifacts.
        - `memory_retrieve`: Retrieve relevant user preferences, project context, or conversation history (params: query, user_id, project_id, max_user_items, max_project_items, min_similarity). Returns personalized context.
        - `generate_image`: Generate images from a text prompt via LLM API /v1/images/generations (params: prompt, size, n, num_inference_steps, cfg_scale).
        - `edit_image`: Edit images with a prompt + input image via LLM API /v1/images/edits (params: prompt, image, mask, size, strength, steps, seed, cfg_scale).

        **MCP Protocol:**
        - Request format: JSON-RPC 2.0 with method and params
        - Response format: Server-Sent Events (SSE) stream
        - Stateless mode (no session management)
      parameters:
      - description: MCP JSON-RPC request payload (e.g., {\
        in: body
        name: request
        required: true
        schema:
          type: object
      produces:
      - text/event-stream
      responses:
        "200":
          description: Streamed MCP response in SSE format
          schema:
            type: string
        "400":
          description: Invalid MCP request payload or unsupported method
          schema:
            $ref: '#/definitions/responses.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/responses.ErrorResponse'
      summary: MCP endpoint for tool execution
      tags:
      - MCP API
swagger: "2.0"
