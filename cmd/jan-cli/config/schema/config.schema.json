{"$schema":"1.0.0","$id":"https://github.com/janhq/jan-server/pkg/config/config","$defs":{"APIKeyConfig":{"properties":{"prefix":{"type":"string"},"default_ttl":{"type":"integer"},"max_ttl":{"type":"integer"},"max_per_user":{"type":"integer","minimum":1}},"additionalProperties":false,"type":"object","required":["prefix","default_ttl","max_ttl","max_per_user"]},"AuthConfig":{"properties":{"keycloak":{"$ref":"#/$defs/KeycloakConfig"}},"additionalProperties":false,"type":"object","required":["keycloak"]},"DatabaseConfig":{"properties":{"postgres":{"$ref":"#/$defs/PostgresConfig"}},"additionalProperties":false,"type":"object","required":["postgres"]},"GatewayConfig":{"properties":{"kong":{"$ref":"#/$defs/KongConfig"}},"additionalProperties":false,"type":"object","required":["kong"]},"GrafanaConfig":{"properties":{"port":{"type":"integer","maximum":65535,"minimum":1},"admin_user":{"type":"string"},"admin_password":{"type":"string"}},"additionalProperties":false,"type":"object","required":["port","admin_user"]},"InferenceConfig":{"properties":{"vllm":{"$ref":"#/$defs/VLLMConfig"}},"additionalProperties":false,"type":"object","required":["vllm"]},"InfrastructureConfig":{"properties":{"database":{"$ref":"#/$defs/DatabaseConfig"},"auth":{"$ref":"#/$defs/AuthConfig"},"gateway":{"$ref":"#/$defs/GatewayConfig"}},"additionalProperties":false,"type":"object","required":["database","auth","gateway"]},"JaegerConfig":{"properties":{"ui_port":{"type":"integer","maximum":65535,"minimum":1}},"additionalProperties":false,"type":"object","required":["ui_port"]},"KeycloakConfig":{"properties":{"base_url":{"type":"string","format":"uri"},"public_url":{"type":"string","format":"uri"},"realm":{"type":"string"},"http_port":{"type":"integer","maximum":65535,"minimum":1},"admin_user":{"type":"string"},"admin_password":{"type":"string"},"admin_realm":{"type":"string"},"admin_client_id":{"type":"string"},"backend_client_id":{"type":"string"},"backend_client_secret":{"type":"string"},"target_client_id":{"type":"string"},"oauth_redirect_uri":{"type":"string","format":"uri"},"jwks_url":{"type":"string","format":"uri"},"oidc_discovery_url":{"type":"string","format":"uri"},"issuer":{"type":"string","format":"uri"},"audience":{"type":"string"},"refresh_jwks_interval":{"type":"integer"},"auth_clock_skew":{"type":"integer"},"guest_role":{"type":"string"},"features":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","required":["base_url","public_url","realm","http_port","admin_user","admin_password","admin_realm","admin_client_id","backend_client_id","backend_client_secret","target_client_id","oauth_redirect_uri","jwks_url","oidc_discovery_url","issuer","audience","refresh_jwks_interval","auth_clock_skew","guest_role","features"]},"KongConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"admin_port":{"type":"integer","maximum":65535,"minimum":1},"admin_url":{"type":"string","format":"uri"},"log_level":{"type":"string","enum":["debug","info","warn","error"]}},"additionalProperties":false,"type":"object","required":["http_port","admin_port","admin_url","log_level"]},"LLMAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"metrics_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"log_format":{"type":"string","enum":["json","console"]},"auto_migrate":{"type":"boolean"},"provider_config_file":{"type":"string"},"provider_config_set":{"type":"string"},"provider_configs_enabled":{"type":"boolean"},"api_key":{"$ref":"#/$defs/APIKeyConfig"},"model_provider_secret":{"type":"string"},"model_sync_enabled":{"type":"boolean"},"model_sync_interval_minutes":{"type":"integer","minimum":1},"media_resolve_url":{"type":"string","format":"uri"},"media_resolve_timeout":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["http_port","metrics_port","log_level","log_format","auto_migrate","provider_config_file","provider_config_set","provider_configs_enabled","api_key","model_sync_enabled","model_sync_interval_minutes","media_resolve_url","media_resolve_timeout"]},"MCPToolsConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"log_format":{"type":"string","enum":["json","console"]},"search_engine":{"type":"string","enum":["serper","searxng"]},"serper_api_key":{"type":"string"},"searxng_url":{"type":"string","format":"uri"},"vector_store_url":{"type":"string","format":"uri"},"sandbox_fusion_url":{"type":"string","format":"uri"},"sandbox_require_approval":{"type":"boolean"},"mcp_config_file":{"type":"string"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","log_format","search_engine","searxng_url","vector_store_url","sandbox_fusion_url","sandbox_require_approval","mcp_config_file"]},"MediaAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"max_upload_bytes":{"type":"integer","minimum":1},"retention_days":{"type":"integer","minimum":1},"proxy_download":{"type":"boolean"},"remote_fetch_timeout":{"type":"integer"},"s3":{"$ref":"#/$defs/S3Config"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","max_upload_bytes","retention_days","proxy_download","remote_fetch_timeout","s3"]},"MetaConfig":{"properties":{"version":{"type":"string"},"environment":{"type":"string"}},"additionalProperties":false,"type":"object","required":["version","environment"]},"MonitoringConfig":{"properties":{"otel":{"$ref":"#/$defs/OTELConfig"},"prometheus":{"$ref":"#/$defs/PrometheusConfig"},"grafana":{"$ref":"#/$defs/GrafanaConfig"},"jaeger":{"$ref":"#/$defs/JaegerConfig"}},"additionalProperties":false,"type":"object","required":["otel","prometheus","grafana","jaeger"]},"OTELConfig":{"properties":{"enabled":{"type":"boolean"},"service_name":{"type":"string"},"endpoint":{"type":"string","format":"uri"},"http_port":{"type":"integer","maximum":65535,"minimum":1},"grpc_port":{"type":"integer","maximum":65535,"minimum":1}},"additionalProperties":false,"type":"object","required":["enabled","service_name","endpoint","http_port","grpc_port"]},"PostgresConfig":{"properties":{"host":{"type":"string"},"port":{"type":"integer","maximum":65535,"minimum":1},"user":{"type":"string"},"database":{"type":"string"},"password":{"type":"string"},"ssl_mode":{"type":"string","enum":["disable","require","verify-ca","verify-full"]},"max_connections":{"type":"integer","maximum":1000,"minimum":1},"max_idle_conns":{"type":"integer","minimum":1},"max_open_conns":{"type":"integer","minimum":1},"conn_max_lifetime":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["host","port","user","database","password","ssl_mode","max_connections","max_idle_conns","max_open_conns","conn_max_lifetime"]},"PrometheusConfig":{"properties":{"port":{"type":"integer","maximum":65535,"minimum":1}},"additionalProperties":false,"type":"object","required":["port"]},"ResponseAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"llm_api_url":{"type":"string","format":"uri"},"mcp_tools_url":{"type":"string","format":"uri"},"max_tool_depth":{"type":"integer","maximum":20,"minimum":1},"tool_timeout":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","llm_api_url","mcp_tools_url","max_tool_depth","tool_timeout"]},"S3Config":{"properties":{"endpoint":{"type":"string","format":"uri"},"public_endpoint":{"type":"string","format":"uri"},"region":{"type":"string"},"bucket":{"type":"string"},"access_key":{"type":"string"},"secret_key":{"type":"string"},"use_path_style":{"type":"boolean"},"presign_ttl":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["endpoint","public_endpoint","region","bucket","use_path_style","presign_ttl"]},"ServicesConfig":{"properties":{"llm_api":{"$ref":"#/$defs/LLMAPIConfig"},"mcp_tools":{"$ref":"#/$defs/MCPToolsConfig"},"media_api":{"$ref":"#/$defs/MediaAPIConfig"},"response_api":{"$ref":"#/$defs/ResponseAPIConfig"}},"additionalProperties":false,"type":"object","required":["llm_api","mcp_tools","media_api","response_api"]},"VLLMConfig":{"properties":{"enabled":{"type":"boolean"},"port":{"type":"integer","maximum":65535,"minimum":1},"model":{"type":"string"},"served_name":{"type":"string"},"gpu_utilization":{"type":"number","maximum":1,"minimum":0},"internal_key":{"type":"string"},"hf_token":{"type":"string"}},"additionalProperties":false,"type":"object","required":["enabled","port","model","served_name","gpu_utilization"]}},"properties":{"meta":{"$ref":"#/$defs/MetaConfig"},"infrastructure":{"$ref":"#/$defs/InfrastructureConfig"},"services":{"$ref":"#/$defs/ServicesConfig"},"inference":{"$ref":"#/$defs/InferenceConfig"},"monitoring":{"$ref":"#/$defs/MonitoringConfig"}},"additionalProperties":false,"type":"object","required":["meta","infrastructure","services","inference","monitoring"],"title":"Jan Server Configuration","description":"Complete configuration schema for Jan Server infrastructure and services"}