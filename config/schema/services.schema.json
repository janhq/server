{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://github.com/janhq/jan-server/packages/go-common/config/services-config","$defs":{"APIKeyConfig":{"properties":{"prefix":{"type":"string"},"default_ttl":{"type":"integer"},"max_ttl":{"type":"integer"},"max_per_user":{"type":"integer","minimum":1}},"additionalProperties":false,"type":"object","required":["prefix","default_ttl","max_ttl","max_per_user"]},"BatchConfig":{"properties":{"enabled":{"type":"boolean"},"max_size":{"type":"integer","minimum":1},"timeout":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["enabled","max_size","timeout"]},"CacheConfig":{"properties":{"enabled":{"type":"boolean"},"type":{"type":"string","enum":["redis","memory","noop"]},"redis":{"$ref":"#/$defs/RedisCacheConfig"},"memory":{"$ref":"#/$defs/MemoryCacheConfig"}},"additionalProperties":false,"type":"object","required":["enabled","type","redis","memory"]},"CircuitBreakerConfig":{"properties":{"enabled":{"type":"boolean"},"threshold":{"type":"integer","minimum":1},"timeout":{"type":"integer"},"max_concurrent":{"type":"integer","minimum":1}},"additionalProperties":false,"type":"object","required":["enabled","threshold","timeout","max_concurrent"]},"EmbeddingConfig":{"properties":{"base_url":{"type":"string","format":"uri"},"api_key":{"type":"string"},"timeout":{"type":"integer"},"validate_on_startup":{"type":"boolean"},"expected_model":{"type":"string"},"expected_dimension":{"type":"integer","minimum":1},"retry":{"$ref":"#/$defs/RetryConfig"},"cache":{"$ref":"#/$defs/CacheConfig"},"batch":{"$ref":"#/$defs/BatchConfig"},"circuit_breaker":{"$ref":"#/$defs/CircuitBreakerConfig"}},"additionalProperties":false,"type":"object","required":["base_url","timeout","validate_on_startup","expected_model","expected_dimension","retry","cache","batch","circuit_breaker"]},"LLMAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"metrics_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"log_format":{"type":"string","enum":["json","console"]},"auto_migrate":{"type":"boolean"},"provider_config_file":{"type":"string"},"provider_config_set":{"type":"string"},"provider_configs_enabled":{"type":"boolean"},"api_key":{"$ref":"#/$defs/APIKeyConfig"},"model_provider_secret":{"type":"string"},"model_sync_enabled":{"type":"boolean"},"model_sync_interval_minutes":{"type":"integer","minimum":1},"prompt_orchestration":{"$ref":"#/$defs/PromptOrchestrationConfig"},"media_resolve_url":{"type":"string","format":"uri"},"media_resolve_timeout":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["http_port","metrics_port","log_level","log_format","auto_migrate","provider_config_file","provider_config_set","provider_configs_enabled","api_key","model_sync_enabled","model_sync_interval_minutes","prompt_orchestration","media_resolve_url","media_resolve_timeout"]},"MCPToolsConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"log_format":{"type":"string","enum":["json","console"]},"search_engine":{"type":"string","enum":["serper","exa","tavily","searxng"]},"serper_api_key":{"type":"string"},"searxng_url":{"type":"string","format":"uri"},"vector_store_url":{"type":"string","format":"uri"},"sandbox_fusion_url":{"type":"string","format":"uri"},"sandbox_require_approval":{"type":"boolean"},"mcp_config_file":{"type":"string"},"serper_enabled":{"type":"boolean"},"exa_api_key":{"type":"string"},"exa_enabled":{"type":"boolean"},"exa_search_endpoint":{"type":"string","format":"uri"},"exa_timeout":{"type":"integer"},"tavily_api_key":{"type":"string"},"tavily_enabled":{"type":"boolean"},"tavily_search_endpoint":{"type":"string","format":"uri"},"tavily_timeout":{"type":"integer"},"searxng_enabled":{"type":"boolean"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","log_format","search_engine","searxng_url","vector_store_url","sandbox_fusion_url","sandbox_require_approval","mcp_config_file"]},"MediaAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"max_upload_bytes":{"type":"integer","minimum":1},"retention_days":{"type":"integer","minimum":1},"proxy_download":{"type":"boolean"},"remote_fetch_timeout":{"type":"integer"},"s3":{"$ref":"#/$defs/S3Config"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","max_upload_bytes","retention_days","proxy_download","remote_fetch_timeout","s3"]},"MemoryCacheConfig":{"properties":{"max_size":{"type":"integer","minimum":1},"ttl":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["max_size","ttl"]},"MemoryToolsConfig":{"properties":{"enabled":{"type":"boolean"},"http_port":{"type":"integer","maximum":65535,"minimum":1},"embedding":{"$ref":"#/$defs/EmbeddingConfig"}},"additionalProperties":false,"type":"object","required":["enabled","http_port","embedding"]},"PromptOrchestrationConfig":{"properties":{"enabled":{"type":"boolean"},"enable_memory":{"type":"boolean"},"enable_templates":{"type":"boolean"},"enable_tools":{"type":"boolean"}},"additionalProperties":false,"type":"object","required":["enabled","enable_memory","enable_templates","enable_tools"]},"RedisCacheConfig":{"properties":{"url":{"type":"string","format":"uri"},"key_prefix":{"type":"string"},"ttl":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["url","key_prefix","ttl"]},"ResponseAPIConfig":{"properties":{"http_port":{"type":"integer","maximum":65535,"minimum":1},"log_level":{"type":"string","enum":["debug","info","warn","error"]},"llm_api_url":{"type":"string","format":"uri"},"mcp_tools_url":{"type":"string","format":"uri"},"max_tool_depth":{"type":"integer","maximum":20,"minimum":1},"tool_timeout":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["http_port","log_level","llm_api_url","mcp_tools_url","max_tool_depth","tool_timeout"]},"RetryConfig":{"properties":{"enabled":{"type":"boolean"},"max_attempts":{"type":"integer","minimum":1},"initial_backoff":{"type":"integer"},"max_backoff":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["enabled","max_attempts","initial_backoff","max_backoff"]},"S3Config":{"properties":{"endpoint":{"type":"string","format":"uri"},"public_endpoint":{"type":"string","format":"uri"},"region":{"type":"string"},"bucket":{"type":"string"},"access_key":{"type":"string"},"secret_key":{"type":"string"},"use_path_style":{"type":"boolean"},"presign_ttl":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["endpoint","public_endpoint","region","bucket","use_path_style","presign_ttl"]}},"properties":{"llm_api":{"$ref":"#/$defs/LLMAPIConfig"},"mcp_tools":{"$ref":"#/$defs/MCPToolsConfig"},"media_api":{"$ref":"#/$defs/MediaAPIConfig"},"response_api":{"$ref":"#/$defs/ResponseAPIConfig"},"memory_tools":{"$ref":"#/$defs/MemoryToolsConfig"}},"additionalProperties":false,"type":"object","required":["llm_api","mcp_tools","media_api","response_api","memory_tools"]}