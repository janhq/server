---
title: Environment Variables
description: Complete environment variable reference
full: false
---

# Environment Variables

Reference for the most common Jan Server environment variables. All keys follow the structure defined in `pkg/config/types.go`, so Compose, Kubernetes, and CI use the same names.

## Infrastructure

### PostgreSQL

| Variable | Default | Notes |
|----------|---------|-------|
| `POSTGRES_HOST` | `api-db` | Service hostname inside Docker/Kubernetes. |
| `POSTGRES_PORT` | `5432` | Shared across services. |
| `POSTGRES_USER` | `jan_user` | Replace in production. |
| `POSTGRES_PASSWORD` | `jan_password` | Store in `config/secrets.env` or secret manager. |
| `POSTGRES_DB` | `jan_llm_api` | Each service can point to its own database/schema. |
| `POSTGRES_SSL_MODE` | `disable` | Enable `require` or `verify-full` for managed databases. |
| `POSTGRES_MAX_IDLE_CONNS` | `5` | Connection pool tuning. |
| `POSTGRES_MAX_OPEN_CONNS` | `15` | Connection pool tuning. |

### Authentication / Keycloak

| Variable | Default | Notes |
|----------|---------|-------|
| `KEYCLOAK_BASE_URL` | `http://keycloak:8085` | Used by services and Kong. |
| `KEYCLOAK_REALM` | `jan` | Realm name. |
| `KEYCLOAK_ADMIN` | `admin` | Admin username for development. |
| `KEYCLOAK_ADMIN_PASSWORD` | `admin` | Change immediately in shared environments. |
| `BACKEND_CLIENT_ID` | `backend` | Service-to-service client. |
| `BACKEND_CLIENT_SECRET` | _secret_ | Stored in `config/secrets.env`. |
| `ISSUER` | `http://localhost:8085/realms/jan` | Used by services to validate JWTs. |
| `JWKS_URL` | `http://keycloak:8085/realms/jan/protocol/openid-connect/certs` | JWKS endpoint. |

### Gateway / Kong

| Variable | Default | Notes |
|----------|---------|-------|
| `KONG_HTTP_PORT` | `8000` | Public HTTP listener. |
| `KONG_ADMIN_PORT` | `8001` | Admin API (limit access in prod). |
| `KONG_SSL_ENABLED` | `false` | Set `true` + cert paths for TLS. |
| `KONG_LOG_LEVEL` | `info` | Accepts standard Kong levels. |

## Service Configuration

### LLM API

```bash
LLM_API_HTTP_PORT=8080
LLM_API_HTTP_TIMEOUT=30s
LLM_API_DATABASE_DSN=postgres://jan_user:${POSTGRES_PASSWORD}@api-db:5432/jan_llm_api?sslmode=disable
LLM_API_DATABASE_MAX_IDLE_CONNS=10
LLM_API_DATABASE_MAX_OPEN_CONNS=30
LLM_API_AUTH_ENABLED=true
LLM_API_MEDIA_RESOLVE_URL=http://kong:8000/media/v1/media/resolve
LLM_API_MODEL_SYNC_ENABLED=true
LLM_API_MODEL_PROVIDER_SECRET=jan-model-provider-secret-2024
```

### Response API

```bash
RESPONSE_API_HTTP_PORT=8082
RESPONSE_API_LOG_LEVEL=info
RESPONSE_API_MAX_TOOL_DEPTH=8
RESPONSE_API_TOOL_TIMEOUT=45s
RESPONSE_API_LLM_API_URL=http://llm-api:8080
RESPONSE_API_MCP_TOOLS_URL=http://mcp-tools:8091
```

### Media API

```bash
MEDIA_API_HTTP_PORT=8285
MEDIA_API_S3_BUCKET_NAME=jan-media
MEDIA_API_AWS_REGION=us-east-1
MEDIA_API_AWS_ACCESS_KEY_ID=...
MEDIA_API_AWS_SECRET_ACCESS_KEY=...
MEDIA_API_MAX_BYTES=26214400
MEDIA_API_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/webp,application/pdf
```

### MCP Tools

```bash
MCP_TOOLS_HTTP_PORT=8091
MCP_TOOLS_LOG_LEVEL=info
MCP_TOOLS_SEARCH_PROVIDER=serper # or searxng/none
SERPER_API_KEY=...
SEARXNG_URL=http://searxng:8080
SANDBOX_FUSION_REQUIRE_APPROVAL=false
```

## LLM Providers

### Local vLLM

```bash
LLM_PROVIDER=vllm
VLLM_PORT=8101
VLLM_MODEL=Qwen/Qwen2.5-0.5B-Instruct
VLLM_SERVED_MODEL_NAME=qwen2.5-0.5b-instruct
HF_TOKEN=hf_xxxxxxxxxxxxx
```

### Remote Providers

```bash
# OpenAI-compatible
LLM_PROVIDER=openai
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_API_KEY=sk-xxxxxxxxxxxxx

# Anthropic
LLM_PROVIDER=anthropic
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxx

# Groq
LLM_PROVIDER=groq
GROQ_API_KEY=gsk_xxxxxxxxxxxxx
```

## Observability & Monitoring

```bash
OTEL_ENABLED=true
OTEL_SERVICE_NAME=llm-api
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=change-me
JAEGER_UI_PORT=16686
```

## Tips

- **Prefixing**: Every service-specific field starts with the service name (for example, `LLM_API_`, `RESPONSE_API_`).
- **Secrets**: Keep API keys and passwords in `config/secrets.env` or secret managers; never commit them.
- **Overrides**: Environment variables override both YAML and `.env`, so they are ideal for CI/CD or Kubernetes secrets.
- **Validation**: Run `jan-cli config validate` after changing env vars to catch missing or mistyped keys.

See related guides for Docker, Kubernetes, and deeper configuration walkthroughs.
